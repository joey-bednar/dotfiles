#!/usr/bin/env bash

if [[ $# -eq 1 ]]; then
    selected=$1
else

    # Linux only
    if [[ $os == "Linux" ]]; then
        selected=$(find ~ ~/personal ~/work -mindepth 1 -maxdepth 1 -type d | fzf)
    # Mac only
    elif [[ $os == "Darwin" ]]; then
        selected=$(find ~ ~/Code -mindepth 1 -maxdepth 1 -type d | fzf)
    fi
fi

if [[ -z $selected ]]; then
    exit 0
fi

selected_name=$(basename "$selected" | tr . _)
tmux_running=$(pgrep tmux)

if [[ -z $TMUX ]]; then
    tmux new-session -n $selected_name -c $selected
else
    cd $selected
    tmux rename-window $selected_name
fi
clear
